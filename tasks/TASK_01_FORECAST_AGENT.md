# üìö –ó–ê–î–ê–ù–ò–ï 1: –°–æ–∑–¥–∞–Ω–∏–µ AI-–∞–≥–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è Cash Flow

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è
–í—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ AI-–∞–≥–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—è **OpenAI Agents SDK**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ cash flow –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü.

---

## üìñ –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

### –ß—Ç–æ —Ç–∞–∫–æ–µ OpenAI Agents SDK?

OpenAI Agents SDK ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –æ—Ç OpenAI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è AI-–∞–≥–µ–Ω—Ç–æ–≤. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:

1. **Agent** ‚Äî —ç—Ç–æ AI-–ø–æ–º–æ—â–Ω–∏–∫ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ–π
2. **Instructions** ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ —Ä–æ–ª—å –∏ –∑–∞–¥–∞—á—É –∞–≥–µ–Ω—Ç–∞
3. **Functions (Tools)** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ Python, –∫–æ—Ç–æ—Ä—ã–µ –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å
4. **Messages** ‚Äî –¥–∏–∞–ª–æ–≥ —Å –∞–≥–µ–Ω—Ç–æ–º

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞:

```python
from openai import OpenAI

client = OpenAI(api_key="your-key")

# –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "system", "content": "–¢—ã ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫"},
        {"role": "user", "content": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ: ..."}
    ]
)

print(response.choices[0].message.content)
```

---

## üõ† –í–∞—à–µ –∑–∞–¥–∞–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `agents/forecast_agent.py` —Å AI-–∞–≥–µ–Ω—Ç–æ–º –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è.

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç DataFrame —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤:

```python
import pandas as pd

# –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (—É–∂–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –º–µ—Å—è—Ü–∞–º)
monthly_data = pd.DataFrame({
    'month': ['2024-09', '2024-10', '2024-11'],
    'category': ['–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤', '–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤', '–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤'],
    'amount': [2730000, 3670000, 3930000]
})
```

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü (2024-12) –≤ –≤–∏–¥–µ —á–∏—Å–ª–∞.

---

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ò–∑—É—á–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `core/io_historical.py` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ:

```python
from core.io_historical import load_history_from_file

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
df = load_history_from_file('data/sample_cashflow.csv')
print(df.head())
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–í —Ñ–∞–π–ª–µ `agents/forecast_agent.py` —Å–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:

```python
import pandas as pd
from typing import Dict

def prepare_monthly_data(df: pd.DataFrame) -> pd.DataFrame:
    """
    –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

    –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
        df: DataFrame —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ [date, category, amount]

    –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
        DataFrame —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ [month, category, amount]
        –≥–¥–µ amount ‚Äî —Å—É–º–º–∞ –∑–∞ –º–µ—Å—è—Ü –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    """
    # TODO: –†–µ–∞–ª–∏–∑—É–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é
    # –ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É 'month' –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ 'date'
    #   df['month'] = df['date'].dt.to_period('M').astype(str)

    # –ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: –°–≥—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –ø–æ month –∏ category
    #   monthly = df.groupby(['month', 'category'])['amount'].sum().reset_index()

    # –ü–æ–¥—Å–∫–∞–∑–∫–∞ 3: –û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–æ –º–µ—Å—è—Ü—É
    #   monthly = monthly.sort_values('month')

    pass  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∫–æ–¥
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ AI-–∞–≥–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Å AI-–∞–≥–µ–Ω—Ç–æ–º:

```python
import config
from openai import OpenAI

def forecast_with_ai(monthly_data: pd.DataFrame, category: str) -> float:
    """
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ cash flow –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü

    Args:
        monthly_data: –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –º–µ—Å—è—Ü–∞–º –¥–ª—è –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        category: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤")

    Returns:
        –ü—Ä–æ–≥–Ω–æ–∑–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü
    """

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–ª–∏–µ–Ω—Ç–∞ OpenAI
    client = OpenAI(api_key=config.OPENAI_API_KEY)

    # TODO: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞
    # –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ DataFrame –≤ —Ç–µ–∫—Å—Ç
    # historical_text = monthly_data.to_string(index=False)

    # TODO: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–∞
    prompt = f"""
    –¢—ã ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–∏ cash flow.

    –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category}

    –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ {config.FORECAST_LOOKBACK_MONTHS} –º–µ—Å—è—Ü–∞):
    {historical_text}

    –ó–∞–¥–∞—á–∞: –°–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–π –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü.

    –ü—Ä–∞–≤–∏–ª–∞:
    1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–µ–Ω–¥ (—Ä–æ—Å—Ç, –ø–∞–¥–µ–Ω–∏–µ, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
    2. –£—á—Ç–∏ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –∑–∞–º–µ—Ç–Ω–∞
    3. –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1500000.50)
    4. –ù–µ –¥–æ–±–∞–≤–ª—è–π —Ç–µ–∫—Å—Ç, —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ
    """

    # TODO: –í—ã–∑–æ–≤–∏—Ç–µ OpenAI API
    response = client.chat.completions.create(
        model=config.FORECAST_MODEL,  # "gpt-4o-mini"
        temperature=config.FORECAST_TEMPERATURE,  # 0.2
        messages=[
            {"role": "system", "content": "–¢—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫. –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞–º–∏."},
            {"role": "user", "content": prompt}
        ]
    )

    # TODO: –ò–∑–≤–ª–µ–∫–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –≤ —á–∏—Å–ª–æ
    # forecast_str = response.choices[0].message.content.strip()
    # forecast_value = float(forecast_str)

    # return forecast_value
    pass  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∫–æ–¥
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ –≤—Å–µ –≤ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é:

```python
def build_cashflow_forecast(df: pd.DataFrame) -> pd.DataFrame:
    """
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: —Å—Ç—Ä–æ–∏—Ç –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü –ø–æ –≤—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

    Args:
        df: –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (date, category, amount)

    Returns:
        DataFrame —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º:
        - period: –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ–≥–Ω–æ–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä "2024-12")
        - category: –∫–∞—Ç–µ–≥–æ—Ä–∏—è
        - forecast_amount: –ø—Ä–æ–≥–Ω–æ–∑ –æ—Ç AI
        - adjustment: 0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        - final_amount: = forecast_amount
    """

    # –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–µ—Å—è—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    monthly = prepare_monthly_data(df)

    # –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ–≥–Ω–æ–∑–∞ (—Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü)
    last_month = monthly['month'].max()
    # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º '2024-11' -> '2024-12'
    from datetime import datetime
    from dateutil.relativedelta import relativedelta

    last_date = datetime.strptime(last_month, '%Y-%m')
    next_date = last_date + relativedelta(months=1)
    forecast_period = next_date.strftime('%Y-%m')

    # –®–∞–≥ 3: –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å AI-–ø—Ä–æ–≥–Ω–æ–∑
    categories = monthly['category'].unique()
    results = []

    for cat in categories:
        # –§–∏–ª—å—Ç—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        cat_data = monthly[monthly['category'] == cat].copy()

        # –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –º–µ—Å—è—Ü–µ–≤
        cat_data = cat_data.tail(config.FORECAST_LOOKBACK_MONTHS)

        # –í—ã–∑—ã–≤–∞–µ–º AI-–∞–≥–µ–Ω—Ç–∞
        forecast_value = forecast_with_ai(cat_data, cat)

        results.append({
            'period': forecast_period,
            'category': cat,
            'forecast_amount': forecast_value,
            'adjustment': 0.0,
            'final_amount': forecast_value
        })

    return pd.DataFrame(results)
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–í–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω:

1. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
2. ‚úÖ –í—ã–∑—ã–≤–∞—Ç—å OpenAI API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
3. ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —á–∏—Å–ª–æ–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑ (–Ω–µ —Ç–µ–∫—Å—Ç!)
4. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—Ç—å DataFrame —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_forecast.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```python
from core.io_historical import load_history_from_file
from agents.forecast_agent import build_cashflow_forecast

# –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
df = load_history_from_file('data/sample_cashflow.csv')

# –°—Ç—Ä–æ–∏–º –ø—Ä–æ–≥–Ω–æ–∑
forecast = build_cashflow_forecast(df)

print("=" * 50)
print("–ü–†–û–ì–ù–û–ó CASH FLOW –ù–ê –°–õ–ï–î–£–Æ–©–ò–ô –ú–ï–°–Ø–¶")
print("=" * 50)
print(forecast)
print("=" * 50)
print(f"–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑: {forecast['final_amount'].sum():,.2f}")
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python test_forecast.py
```

---

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞—Ç–∞–º–∏ –≤ pandas:

```python
# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–∞—Ç—É –≤ –ø–µ—Ä–∏–æ–¥ (–º–µ—Å—è—Ü)
df['month'] = df['date'].dt.to_period('M').astype(str)

# –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
monthly = df.groupby(['month', 'category'])['amount'].sum().reset_index()
```

### –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç OpenAI:

```python
response = client.chat.completions.create(...)
answer = response.choices[0].message.content.strip()

# –ò–Ω–æ–≥–¥–∞ GPT –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–∏—à–Ω–µ–µ, –æ—á–∏—â–∞–µ–º:
import re
numbers = re.findall(r'-?\d+\.?\d*', answer)
if numbers:
    forecast = float(numbers[0])
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

```python
try:
    forecast = float(response.choices[0].message.content.strip())
except ValueError:
    # –ï—Å–ª–∏ AI –≤–µ—Ä–Ω—É–ª –Ω–µ —á–∏—Å–ª–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ä–µ–¥–Ω–µ–µ
    forecast = monthly_data['amount'].mean()
```

---

## üéì –ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ

1. ‚úÖ –ö–∞–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å OpenAI –∫–ª–∏–µ–Ω—Ç–∞
2. ‚úÖ –ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
3. ‚úÖ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –æ—Ç LLM
4. ‚úÖ –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AI –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
5. ‚úÖ –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏ –≤ pandas

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [OpenAI API Reference](https://platform.openai.com/docs/api-reference)
- [Pandas Time Series](https://pandas.pydata.org/docs/user_guide/timeseries.html)
- [Prompt Engineering –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤](https://www.promptingguide.ai/)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –≤—ã:
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –∞–≥–µ–Ω—Ç–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç–µ –µ–≥–æ –≤ Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—è –Ω–∞–ø–∏—à—É)
3. –ü–µ—Ä–µ–π–¥–µ—Ç–µ –∫ **–ó–∞–¥–∞–Ω–∏—é 2**: Multi-agent —Å–∏—Å—Ç–µ–º–∞ —Å AutoGen –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞

---

**–£–¥–∞—á–∏! –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ!** üéâ
